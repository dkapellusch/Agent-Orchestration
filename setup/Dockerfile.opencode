ARG BASE_IMAGE=contai:latest

FROM ${BASE_IMAGE}

# Agent sandbox image. The base contai image already has opencode-ai and claude installed,
# and already creates a user matching the host's UID/GID for proper
# file permission handling. We don't need to create another user.

# Copy entrypoint script that syncs shared agents
COPY docker-entrypoint.sh /usr/local/bin/docker-entrypoint.sh
RUN chmod +x /usr/local/bin/docker-entrypoint.sh

WORKDIR /workspace

ENTRYPOINT ["/usr/local/bin/docker-entrypoint.sh"]
